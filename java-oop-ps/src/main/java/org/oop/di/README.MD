# Руководство по классу инъекции зависимостей (Dependency Injection)

Это руководство описывает класс `Injector`, который используется для управления созданием и предоставлением объектов сервисов и DAO в Java-пакете `org.oop.di`.

## Класс Injector

### Описание

Класс `Injector` используется для инъекции зависимостей по всему приложению. Это централизованный способ предоставления экземпляров сервисов и DAO объектов, необходимых для работы приложения.

### Особенности

- Синглтон-паттерн: `Injector` реализует паттерн синглтона, что означает, что будет существовать только один экземпляр данного класса.
- Ленивая инициализация: объект класса `Injector` будет создан при его первом использовании.
- Кэширование сервисов: однажды созданные сервисы сохраняются в кэше, обеспечивая их повторное использование без пересоздания.

### Методы

- `getInstance()` - статический метод для доступа к единственному экземпляру класса `Injector`.
- `registerService(Class<T> serviceType, Supplier<? extends T> factory)` - регистрирует фабрику, которая будет использоваться для создания экземпляров сервисов данного типа.
- `getService(Class<T> serviceType)` - возвращает существующий экземпляр сервиса из кэша или создает новый с помощью соответствующей фабрики.

### Примеры использования

При разработке приложения, где требуются сервисы или DAO объекты (например, для работы с пользователями или статьями), разработчики могут получить экземпляр нужного сервиса следующим образом:

```java
IUserService userService = Injector.getInstance().getService(IUserService.class);
```

Данный вызов вернет экземпляр сервиса `UserService`, который можно использовать для различных операций, связанных с пользователями.

### Инструкции по расширению

Чтобы добавить новый сервис или DAO объект в систему инъекции зависимостей, необходимо:

1. Создать интерфейс нового сервиса или DAO объекта.
2. Создать реализацию этого интерфейса.
3. Зарегистрировать новый сервис в `Injector` при помощи вызова метода `registerService`, передав связку между типом сервиса и способом его создания (через лямбда-выражение или ссылку на конструктор).

### Примечания

- При использовании `Injector` важно обеспечить согласованное состояние кэша и избегать циклических зависимостей.
- Принцип единственной ответственности: класс `Injector` не должен заниматься чем-либо, кроме управления зависимостями.
- Исключения: подход нуждается в обработке исключительных ситуаций, например, если для запрашиваемого типа сервиса нет зарегистрированной фабрики, выбрасывается исключение `RuntimeException`.

Внедрение зависимостей позволяет приложению быть гибким и удобным в расширении, упрощая процесс создания, конфигурации и предоставления компонентов приложения.